<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>$HADOWbYT3$ Files</title>
<style>
  body {
    background: #0a0a0a;
    color: #00ffcc;
    font-family: monospace;
    padding: 40px;
  }

  h1 {
    text-shadow: 0 0 10px #00ffcc;
  }

  .home-btn {
    display: inline-block;
    margin-bottom: 20px;
    padding: 10px 20px;
    border: 1px solid #00ffcc;
    color: #00ffaa;
    text-decoration: none;
    transition: 0.2s;
  }

  .home-btn:hover {
    background: rgba(0,255,204,0.1);
    box-shadow: 0 0 10px #00ffcc;
  }

  .file {
    border: 1px solid #00ffcc;
    padding: 15px;
    margin-bottom: 10px;
    background: rgba(0,255,204,0.05);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .locked {
    opacity: 0.4;
  }

  .countdown {
    color: #ff4444;
    font-size: 0.9em;
  }

  a {
    color: #00ffaa;
    text-decoration: none;
  }
</style>
</head>
<body>

<a href="index.html" class="home-btn">üè† Home</a>

<h1>üìÅ Compressed Files</h1>
<p>New uploads unlock after 24 hours</p>

<div id="files">Loading...</div>

<script>
const username = "Hackerslacker921";
const repo = "SHADOWBYT3S-BL0G";
const allowedExtensions = ['.zip', '.7z'];
const LOCK_TIME = 24 * 60 * 60 * 1000; // 24 hours

let baseline = localStorage.getItem("baselineTime");
if (!baseline) {
  baseline = Date.now();
  localStorage.setItem("baselineTime", baseline);
}
baseline = parseInt(baseline);

function formatTime(ms) {
  const h = Math.floor(ms / 3600000);
  const m = Math.floor((ms % 3600000) / 60000);
  const s = Math.floor((ms % 60000) / 1000);
  return `${h}h ${m}m ${s}s`;
}

async function getCommitDate(path) {
  const res = await fetch(`https://api.github.com/repos/${username}/${repo}/commits?path=${path}&per_page=1`);
  const data = await res.json();
  return new Date(data[0].commit.author.date).getTime();
}

async function loadFiles() {
  const container = document.getElementById('files');
  const res = await fetch(`https://api.github.com/repos/${username}/${repo}/contents/`);
  const data = await res.json();

  const files = data.filter(file =>
    file.type === 'file' &&
    allowedExtensions.some(ext => file.name.toLowerCase().endsWith(ext))
  );

  if (files.length === 0) {
    container.innerHTML = "<p>No compressed files found.</p>";
    return;
  }

  container.innerHTML = "";

  for (const file of files) {
    const commitTime = await getCommitDate(file.path);
    const unlockTime = commitTime + LOCK_TIME;
    const div = document.createElement("div");
    div.className = "file";

    const sizeMB = (file.size / 1024 / 1024).toFixed(2);

    if (commitTime < baseline || Date.now() >= unlockTime) {
      div.innerHTML = `
        <a href="${file.download_url}" target="_blank">${file.name}</a>
        <span>${sizeMB} MB</span>
      `;
    } else {
      div.classList.add("locked");

      const countdownSpan = document.createElement("span");
      countdownSpan.className = "countdown";

      const nameSpan = document.createElement("span");
      nameSpan.textContent = "üîí " + file.name;

      div.appendChild(nameSpan);
      div.appendChild(countdownSpan);

      setInterval(() => {
        const remaining = unlockTime - Date.now();
        if (remaining <= 0) {
          div.classList.remove("locked");
          div.innerHTML = `
            <a href="${file.download_url}" target="_blank">${file.name}</a>
            <span>${sizeMB} MB</span>
          `;
        } else {
          countdownSpan.textContent = formatTime(remaining);
        }
      }, 1000);
    }

    container.appendChild(div);
  }
}

loadFiles();
</script>

</body>
</html>
